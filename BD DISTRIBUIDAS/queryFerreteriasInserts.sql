-- nota: la fecha tiene el formato mes-dia-año  -- drop database ferreterias
CREATE DATABASE FERRETERIAS
GO
USE FERRETERIAS
GO
CREATE TABLE ZONAS(
ZONAID INT NOT NULL ,
ZONANOMBRE NVARCHAR(20) NOT NULL
)
GO
CREATE TABLE COLONIAS(
COLID INT NOT NULL ,
COLNOMBRE NVARCHAR(50) NOT NULL,
COLCP NCHAR(5) NULL,
MUNID INT NOT NULL
)
GO
CREATE TABLE MUNICIPIOS(
MUNID INT NOT NULL ,
MUNNONBRE NVARCHAR(50) NOT NULL
)
GO
CREATE TABLE FAMILIAS (
FAMID INT NOT NULL,
FAMNOMBRE NVARCHAR (50) NOT NULL,
FAMDESCRIPCION NVARCHAR(50)NOT NULL
)
GO
CREATE TABLE FERRETERIAS (
FERRID INT NOT NULL,
FERRNOMBRE NVARCHAR (20) NOT NULL,
FERDOMICILIO NVARCHAR(20) NOT NULL,
FERRTELEFONO NVARCHAR (10) NOT NULL
)
GO
CREATE TABLE EMPLEADOS (
EMPID INT NOT NULL,
EMPNOMBRE NVARCHAR (50) NOT NULL,
EMPAPEPAT NVARCHAR (50) NOT NULL,
EMPAPEMAT NVARCHAR (50) NULL,
EMPDOMICILIO NVARCHAR(50) NOT NULL,
EMPTELEFONO NVARCHAR (50) NOT NULL,
EMPCELULAR NVARCHAR(10) NULL,
EMPRFC NVARCHAR(13) NULL,
EMPCURP NVARCHAR(18) NULL,
EMPFECHAINGRESO DATETIME NOT NULL,
EMPFECHANACIMIENTO DATETIME NOT NULL,
ZONAID INT NOT NULL,
JEFEID INT NULL
)
GO
CREATE TABLE CLIENTES(
CTEID INT NOT NULL,
CTENOMBRE NVARCHAR (50) NOT NULL,
CTEAPEPAT NVARCHAR(50) NOT NULL,
CTEAPEMAT NVARCHAR(50) NULL,
CTEDOMICILIO NVARCHAR(50) NOT NULL,
CTETELEFONO NVARCHAR(50) NOT NULL,
CTECELULAR NVARCHAR(50) NOT NULL,
CTERFC NVARCHAR (13) NOT NULL,
CTECURP NVARCHAR (15) NOT NULL,
CTEFECHANACIMIENTO DATETIME NOT NULL,
CTESEXO NCHAR(1) NOT NULL,
COLID INT NOT NULL
)
GO
CREATE TABLE ARTICULOS (
ARTID INT NOT NULL,
ARTNOMBRE NVARCHAR (50),
ARTDESCRIPCION NVARCHAR (50) NOT NULL,
ARTPRECIO NUMERIC (12,2) NOT NULL,
FAMID INT NOT NULL
)
GO
CREATE TABLE VENTAS (
FOLIO INT NOT NULL,
FECHA DATETIME NOT NULL,
FERRID INT NOT NULL,
CTEID INT NOT NULL,
EMPID INT NOT NULL
)
GO
CREATE TABLE DETALLE(
FOLIO INT NOT NULL,
ARTID INT NOT NULL,
CANTIDAD NUMERIC (12,2),
PRECIO NUMERIC (12,2) NOT NULL
)
GO
ALTER TABLE ZONAS ADD CONSTRAINT PK_ZONAS PRIMARY KEY (ZONAID);
ALTER TABLE COLONIAS ADD CONSTRAINT PK_COLONIAS PRIMARY KEY (COLID);
ALTER TABLE MUNICIPIOS ADD CONSTRAINT PK_MUNICIPIO PRIMARY KEY (MUNID);
ALTER TABLE FAMILIAS ADD CONSTRAINT PK_FAMILIA PRIMARY KEY (FAMID);
ALTER TABLE FERRETERIAS ADD CONSTRAINT PK_FERRETERIAS PRIMARY KEY(FERRID);
ALTER TABLE EMPLEADOS ADD CONSTRAINT PK_EMPLEADOS PRIMARY KEY(EMPID);
ALTER TABLE CLIENTES ADD CONSTRAINT PK_CLIENTES PRIMARY KEY(CTEID);
ALTER TABLE ARTICULOS ADD CONSTRAINT PK_ARTICULOS PRIMARY KEY(ARTID);
ALTER TABLE VENTAS ADD CONSTRAINT PK_VENTAS PRIMARY KEY(FOLIO);
ALTER TABLE EMPLEADOS ADD CONSTRAINT FK_JEFE FOREIGN KEY (JEFEID) REFERENCES EMPLEADOS (EMPID)
GO
ALTER TABLE COLONIAS ADD CONSTRAINT FK_COL_MUN FOREIGN KEY (MUNID) REFERENCES MUNICIPIOS (MUNID);
ALTER TABLE CLIENTES ADD CONSTRAINT FK_CLI_COL FOREIGN KEY (COLID) REFERENCES COLONIAS(COLID);
ALTER TABLE VENTAS ADD CONSTRAINT FK_VEN_EMP FOREIGN KEY (EMPID) REFERENCES EMPLEADOS (EMPID);
ALTER TABLE VENTAS ADD CONSTRAINT FK_VEN_FERR FOREIGN KEY (FERRID) REFERENCES FERRETERIAS (FERRID);
ALTER TABLE VENTAS ADD CONSTRAINT FK_VEN_CLI FOREIGN KEY (CTEID) REFERENCES CLIENTES(CTEID);
ALTER TABLE ARTICULOS ADD CONSTRAINT FK_ART_FAM FOREIGN KEY (FAMID) REFERENCES FAMILIAS(FAMID);
ALTER TABLE DETALLE ADD CONSTRAINT FK_DET_VEN FOREIGN KEY (FOLIO) REFERENCES VENTAS (FOLIO);
ALTER TABLE DETALLE ADD CONSTRAINT FK_DET_ART FOREIGN KEY (ARTID) REFERENCES ARTICULOS(ARTID);
ALTER TABLE EMPLEADOS ADD CONSTRAINT FK_FERR_ZON FOREIGN KEY (ZONAID) REFERENCES ZONAS (ZONAID);
GO
ALTER TABLE EMPLEADOS ADD CONSTRAINT UN_RFC_EMP UNIQUE(EMPRFC)
ALTER TABLE EMPLEADOS ADD CONSTRAINT UN_CURP_EMP UNIQUE(EMPCURP)
ALTER TABLE CLIENTES ADD CONSTRAINT UN_RFC_CTE UNIQUE(CTERFC)
ALTER TABLE CLIENTES ADD CONSTRAINT UN_CURP_CTE UNIQUE(CTECURP)
GO
ALTER TABLE CLIENTES ADD
CONSTRAINT CC_CTE_SEXO CHECK(CTESEXO IN('H','M')),
CONSTRAINT CC_CTE_RFC_CURP CHECK(CTERFC <> CTECURP)
GO
ALTER TABLE EMPLEADOS ADD
CONSTRAINT CC_EMP_RFC_CURP CHECK(EMPRFC <> EMPCURP)
GO
ALTER TABLE DETALLE ADD
CONSTRAINT CC_DET_PRECIO CHECK(PRECIO>0),
CONSTRAINT CC_DET_CANTIDAD CHECK(CANTIDAD>0)
GO
ALTER TABLE ARTICULOS ADD
CONSTRAINT CC_ART_PRECIO CHECK(ARTPRECIO>0)
GO
ALTER TABLE EMPLEADOS ADD
CONSTRAINT DC_EMP_DOM DEFAULT('Domicilio desconocido') FOR EMPDOMICILIO,
CONSTRAINT DC_EMP_TEL DEFAULT('SIN TELÉFONO') FOR EMPTELEFONO
GO
ALTER TABLE CLIENTES ADD
CONSTRAINT DC_CLIENTES_DOM DEFAULT('Domicilio desconocido') FOR CTEDOMICILIO,
CONSTRAINT DC_CLIENTES_TEL DEFAULT('SIN TELÉFONO') FOR CTETELEFONO
GO
ALTER TABLE COLONIAS ADD
CONSTRAINT DC_COL_CP DEFAULT('00000') FOR COLCP
GO
INSERT INTO ZONAS VALUES(1,'NORTE')
INSERT INTO ZONAS VALUES(2,'SUR')
INSERT INTO ZONAS VALUES(3,'ESTE')
INSERT INTO ZONAS VALUES(4,'OESTE')
INSERT INTO ZONAS VALUES(5,'NORESTE')
 
INSERT INTO MUNICIPIOS VALUES (1,'CULIACAN')
INSERT INTO MUNICIPIOS VALUES (2,'AHOME')
INSERT INTO MUNICIPIOS VALUES (3,'ANGOSTURA')
INSERT INTO MUNICIPIOS VALUES (4,'MIKASA')
INSERT INTO MUNICIPIOS VALUES (5,'HEREN')
GO
INSERT INTO COLONIAS VALUES(6,'SOLIDARIDAD',default,1)
INSERT INTO COLONIAS VALUES(2,'SOL','80001',2)
INSERT INTO COLONIAS VALUES(3,'SOLI','80002',3)
INSERT INTO COLONIAS VALUES(4,'SOLAL','80003',4)
INSERT INTO COLONIAS VALUES(5,'SOLO','80004',5)
GO
INSERT INTO FAMILIAS VALUES(1,'JARDINERIA','BUENA FAMILIA')
INSERT INTO FAMILIAS VALUES(2,'CLAVOS','REGULAR FAMILIA')
INSERT INTO FAMILIAS VALUES(3,'PINTURAS','MEDIANA FAMILIA')
INSERT INTO FAMILIAS VALUES(4,'ELECTRICO','MALA FAMILIA')
INSERT INTO FAMILIAS VALUES(5,'CARPINTERIA','HORRIBLE FAMILIA')
 
INSERT INTO FERRETERIAS VALUES(1,'FERRETODO','ESQUINA CONTRA OXXO','6589746501')
INSERT INTO FERRETERIAS VALUES(2,'FERRE YAQUI','ESQUINA CONTRA LEY','6589746501')
INSERT INTO FERRETERIAS VALUES(3,'FERRE PONY','ESQUINA CONT','6589746501')
INSERT INTO FERRETERIAS VALUES(4,'FERRE VERDE','ESQUINA CONTRA FARMA','6589746501')
INSERT INTO FERRETERIAS VALUES(5,'FERRE RO','ESQUINA CONTRA AZUL','6589746501')
 
INSERT INTO EMPLEADOS VALUES(2,'JOSE','GALO','BOLIÑOZ','VERDE #1888','66774816','66997744','OKRGSDMOSD','OKMGSDMODBHODS',25/04/2002,26/04/1950,2,NULL)
INSERT INTO EMPLEADOS VALUES(8,'ANA','ROBLES','BOLAÑOZ',default,'66774816','66997744','OKMGSDMO','DMOSDMODD',25/04/2002,26/04/1950,2,2)
INSERT INTO EMPLEADOS VALUES(3,'LUIS','JIMENEZ','BALAÑOZ','CHICA #1888','66774816','66997744','OKMGSDMGDS','OKSDMOSDGFDS',25/04/2002,26/04/1950,3,2)
INSERT INTO EMPLEADOS VALUES(4,'MARIO','GEMEZ','BOLA','MEDIANA #1888','66774816','66997744','OKMGSDMGVS','OKMGSDMOSDMOFD',25/04/2002,26/04/1950,4,3)
INSERT INTO EMPLEADOS VALUES(5,'LUIS','GAMEZ','BOLO','ABIERTA #1888','66774816','66997744','OKMGSDMOFC','OKMGSDMOSDMVDS',25/04/2002,26/04/1950,5,3)

INSERT INTO CLIENTES VALUES(1,'PEDRO','LOAIZA','LOAIZA','AZUL #6450','6321456874','5687464513','AD6A5E9Q8WE7F','JD6A5E9Q8WE7F',20/08/2000,'H',2)
INSERT INTO CLIENTES VALUES(2,'RAUL','LARA','SOTO','NARANJA #6450','6354456874','5687646513','BD6A5E9Q8WE7F','ID6A5E9Q8WE7F',20/08/2000,'H',2)
INSERT INTO CLIENTES VALUES(3,'JOSE','LOPEZ','RAMIREZ','ROJO #6450','6321646874','5687456513','CD6A5E9Q8WE7F','HD6A5E9Q8WE7F',20/08/2000,'H',3)
INSERT INTO CLIENTES VALUES(4,'CARLOS','CASTRO','RAMIREZ','AMARILLO #6450','6521456874','6587456513','DD6A5E9Q8WE7F','GD6A5E9Q8WE7F',20/08/2000,'H',4)
INSERT INTO CLIENTES VALUES(5,'ANA','JUAREZ','RAMIREZ','VERDE #6450','6321456574','5687465513','ED6A5E9Q8WE7F','FD6A5E9Q8WE7F',20/08/2000,'H',5)

INSERT INTO ARTICULOS VALUES(1,'MARTILLO','BUEN MARTILLO',150.99,1)
INSERT INTO ARTICULOS VALUES(2,'CERRUCHO','BUEN CERRUCHO',150.99,2)
INSERT INTO ARTICULOS VALUES(3,'TALADRO','BUEN TALADRO',150.99,3)
INSERT INTO ARTICULOS VALUES(4,'DESARMADOR','BUEN DESARMADOR',150.99,4)
INSERT INTO ARTICULOS VALUES(5,'UTENSILIO','BUEN UTENSILIO',150.99,5)

INSERT INTO VENTAS VALUES(1,'10/10/2000',1,2,2)
INSERT INTO VENTAS VALUES(2,'10/10/2000',2,2,2)
INSERT INTO VENTAS VALUES(3,'10/10/2000',3,3,3)
INSERT INTO VENTAS VALUES(4,'10/10/2000',4,3,4)
INSERT INTO VENTAS VALUES(5,'10/10/2000',5,5,5)

INSERT INTO VENTAS VALUES(6,'10/11/2000',1,2,2)
INSERT INTO VENTAS VALUES(7,'10/11/2000',2,2,2)
INSERT INTO VENTAS VALUES(8,'10/11/2000',3,3,2)
INSERT INTO VENTAS VALUES(9,'10/11/2000',4,3,2)
INSERT INTO VENTAS VALUES(10,'10/11/2000',5,5,2)

INSERT INTO VENTAS VALUES(11,'10/12/2000',1,2,3)
INSERT INTO VENTAS VALUES(12,'10/12/2000',2,2,4)
INSERT INTO VENTAS VALUES(13,'10/12/2000',3,3,3)
INSERT INTO VENTAS VALUES(14,'10/12/2000',4,3,4)
INSERT INTO VENTAS VALUES(15,'10/12/2000',5,5,5)

INSERT INTO VENTAS VALUES(16,'10/13/2000',1,2,5)
INSERT INTO VENTAS VALUES(17,'10/13/2000',2,2,5)
INSERT INTO VENTAS VALUES(18,'10/13/2000',3,3,5)
INSERT INTO VENTAS VALUES(19,'10/13/2000',4,3,5)
INSERT INTO VENTAS VALUES(20,'10/13/2000',5,5,5)

INSERT INTO DETALLE VALUES(1,1,1,680.98)
INSERT INTO DETALLE VALUES(1,2,1,780.98)
INSERT INTO DETALLE VALUES(1,3,2,880.98)
INSERT INTO DETALLE VALUES(1,4,6,980.98)
INSERT INTO DETALLE VALUES(1,5,7,1080.98)

INSERT INTO DETALLE VALUES(2,1,4,680.98)
INSERT INTO DETALLE VALUES(2,2,3,780.98)
INSERT INTO DETALLE VALUES(2,3,2,880.98)
 
INSERT INTO DETALLE VALUES(3,3, 3,880.98)
INSERT INTO DETALLE VALUES(3,4, 4,980.98)
INSERT INTO DETALLE VALUES(3,5, 5,1080.98)

INSERT INTO DETALLE VALUES(4,1,5,680.98)
INSERT INTO DETALLE VALUES(4,2,7,780.98)
INSERT INTO DETALLE VALUES(4,4,7,980.98)

INSERT INTO DETALLE VALUES(5,1,4,680.98)
INSERT INTO DETALLE VALUES(5,4,5,980.98)
INSERT INTO DETALLE VALUES(5,5,1,1080.98)

INSERT INTO DETALLE VALUES(6,1,3,680.98)
INSERT INTO DETALLE VALUES(6,4,4,980.98)
INSERT INTO DETALLE VALUES(6,5,2,1080.98)

INSERT INTO DETALLE VALUES(7,1,5,680.98)
INSERT INTO DETALLE VALUES(7,2,7,780.98)
INSERT INTO DETALLE VALUES(7,4,7,980.98)

INSERT INTO DETALLE VALUES(8,1,4,680.98)
INSERT INTO DETALLE VALUES(8,2,3,780.98)
INSERT INTO DETALLE VALUES(8,3,2,880.98)
 
INSERT INTO DETALLE VALUES(9,3, 3,880.98)
INSERT INTO DETALLE VALUES(9,4, 4,980.98)
INSERT INTO DETALLE VALUES(9,5, 5,1080.98)

INSERT INTO DETALLE VALUES(10,1,5,680.98)
INSERT INTO DETALLE VALUES(10,2,7,780.98)
INSERT INTO DETALLE VALUES(10,4,7,980.98)

INSERT INTO DETALLE VALUES(11,1,1,680.98)
INSERT INTO DETALLE VALUES(11,2,1,780.98)
INSERT INTO DETALLE VALUES(11,3,2,880.98)
INSERT INTO DETALLE VALUES(11,4,6,980.98)
INSERT INTO DETALLE VALUES(11,5,7,1080.98)

INSERT INTO DETALLE VALUES(12,1,4,680.98)
INSERT INTO DETALLE VALUES(12,2,3,780.98)
INSERT INTO DETALLE VALUES(12,3,2,880.98)
 
INSERT INTO DETALLE VALUES(13,3, 3,880.98)
INSERT INTO DETALLE VALUES(13,4, 4,980.98)
INSERT INTO DETALLE VALUES(13,5, 5,1080.98)

INSERT INTO DETALLE VALUES(14,1,5,680.98)
INSERT INTO DETALLE VALUES(14,2,7,780.98)
INSERT INTO DETALLE VALUES(14,4,7,980.98)

INSERT INTO DETALLE VALUES(15,1,4,680.98)
INSERT INTO DETALLE VALUES(15,4,5,980.98)
INSERT INTO DETALLE VALUES(15,5,1,1080.98)

INSERT INTO DETALLE VALUES(16,1,3,680.98)
INSERT INTO DETALLE VALUES(16,4,4,980.98)
INSERT INTO DETALLE VALUES(16,5,2,1080.98)

INSERT INTO DETALLE VALUES(17,1,5,680.98)
INSERT INTO DETALLE VALUES(17,2,7,780.98)
INSERT INTO DETALLE VALUES(17,4,7,980.98)

INSERT INTO DETALLE VALUES(18,1,4,680.98)
INSERT INTO DETALLE VALUES(18,2,3,780.98)
INSERT INTO DETALLE VALUES(18,3,2,880.98)
 
INSERT INTO DETALLE VALUES(19,3, 3,880.98)
INSERT INTO DETALLE VALUES(19,4, 4,980.98)
INSERT INTO DETALLE VALUES(19,5, 5,1080.98)

INSERT INTO DETALLE VALUES(20,1,5,680.98)
INSERT INTO DETALLE VALUES(20,2,7,780.98)
INSERT INTO DETALLE VALUES(20,4,7,980.98)

 
